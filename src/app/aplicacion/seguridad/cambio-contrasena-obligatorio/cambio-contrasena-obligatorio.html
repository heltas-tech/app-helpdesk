<div class="min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-md">
    <div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10">
      
      <!-- Header -->
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-2">Cambio de Contraseña Obligatorio</h2>
        <p class="text-gray-600">Debes cambiar tu contraseña antes de acceder al sistema.</p>
      </div>

      <!-- Formulario -->
      <form [formGroup]="cambioForm" (ngSubmit)="onSubmit()">
        
        <!-- Nueva Contraseña -->
        <div class="mb-4">
          <label for="newPassword" class="block text-sm font-medium text-gray-700">
            Nueva Contraseña
          </label>
          <input
            id="newPassword"
            type="password"
            formControlName="newPassword"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            placeholder="Ingresa tu nueva contraseña">
          
          <div *ngIf="cambioForm.get('newPassword')?.invalid && cambioForm.get('newPassword')?.touched" 
               class="text-red-600 text-sm mt-1">
            <div *ngIf="cambioForm.get('newPassword')?.errors?.['required']">
              La contraseña es requerida
            </div>
            <div *ngIf="cambioForm.get('newPassword')?.errors?.['minlength']">
              Mínimo 8 caracteres
            </div>
            <div *ngIf="cambioForm.get('newPassword')?.errors?.['pattern']">
              Debe contener mayúscula, minúscula, número y carácter especial
            </div>
          </div>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="mb-6">
          <label for="confirmPassword" class="block text-sm font-medium text-gray-700">
            Confirmar Contraseña
          </label>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            placeholder="Confirma tu nueva contraseña">
          
          <div *ngIf="cambioForm.get('confirmPassword')?.errors?.['passwordMismatch'] && cambioForm.get('confirmPassword')?.touched" 
               class="text-red-600 text-sm mt-1">
            Las contraseñas no coinciden
          </div>
        </div>

        <!-- Mensaje -->
        <div *ngIf="message" 
             [class]="message.includes('❌') ? 'bg-red-50 text-red-700' : 'bg-green-50 text-green-700'"
             class="rounded-md p-4 mb-4 text-sm">
          {{ message }}
        </div>

        <!-- Botón -->
        <button
          type="submit"
          [disabled]="!cambioForm.valid || isLoading"
          class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed">
          <span *ngIf="!isLoading">Cambiar Contraseña</span>
          <span *ngIf="isLoading">Procesando...</span>
        </button>

      </form>
    </div>
  </div>
</div>